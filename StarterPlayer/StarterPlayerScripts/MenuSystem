local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- ==============================================================================
-- [ë°ì´í„° ì„¤ì •] ì„ì‹œ ì•„ì´í…œ ë° ìŠ¤íƒ¯ ë°ì´í„°
-- ==============================================================================
local myStats = {
	Level = 1,
	Gold = 200,
	Attack = 10,
	Health = 100,
	Defense = 5
}

-- ì•„ì´í…œ ëª©ë¡ (í…ŒìŠ¤íŠ¸ìš©)
local inventoryData = {
	{ id = 1, name = "Iron Sword", type = "Weapon", stat = "ATK +5", value = 5, icon = "âš”ï¸" },
	{ id = 2, name = "Wood Shield", type = "Shield", stat = "DEF +3", value = 3, icon = "ğŸ›¡ï¸" },
	{ id = 3, name = "Leather Armor", type = "Body", stat = "HP +20", value = 20, icon = "ğŸ‘•" },
	{ id = 4, name = "Iron Helm", type = "Head", stat = "HP +10", value = 10, icon = "ğŸª–" },
	{ id = 5, name = "Speed Boots", type = "Shoes", stat = "SPD +2", value = 2, icon = "ğŸ‘¢" },
	{ id = 6, name = "Fire Ball", type = "Special", stat = "SPC +10", value = 10, icon = "ğŸ”¥" },
    { id = 7, name = "Potion", type = "Consumable", stat = "HP +50", value = 50, icon = "ğŸ§ª" },
}

-- í˜„ì¬ ì¥ì°©ëœ ì•„ì´í…œ
local equippedData = {
	Head = nil,
	Weapon = nil,
	Body = nil,
	Shield = nil,
	Shoes = nil,
	Special = nil
}

-- ==============================================================================
-- [UI ìƒì„±] ì½”ë“œë¡œ UI ê·¸ë¦¬ê¸° (ê·¸ë¦¼íŒ ë””ìì¸ ë°˜ì˜)
-- ==============================================================================
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "GameMenuUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

-- 1. ë©”ë‰´ ë²„íŠ¼ (í™”ë©´ ì™¼ìª½)
local menuButton = Instance.new("TextButton")
menuButton.Name = "MenuButton"
menuButton.Size = UDim2.new(0, 60, 0, 60)
menuButton.Position = UDim2.new(0, 20, 0.5, -30) -- ì™¼ìª½ ì¤‘ì•™
menuButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
menuButton.Text = "MENU"
menuButton.TextColor3 = Color3.fromRGB(255, 255, 255)
menuButton.Font = Enum.Font.GothamBold
menuButton.TextSize = 14
menuButton.Parent = screenGui

local btnCorner = Instance.new("UICorner")
btnCorner.CornerRadius = UDim.new(0, 10)
btnCorner.Parent = menuButton

local btnStroke = Instance.new("UIStroke")
btnStroke.Thickness = 2
btnStroke.Color = Color3.fromRGB(255, 255, 255)
btnStroke.Parent = menuButton

-- 2. ë©”ì¸ í”„ë ˆì„ (ì „ì²´ ì°½)
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 700, 0, 450)
mainFrame.Position = UDim2.new(0.5, -350, 0.5, -225) -- í™”ë©´ ì¤‘ì•™
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
mainFrame.Visible = false -- ì²˜ìŒì—” ìˆ¨ê¹€
mainFrame.Parent = screenGui

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 15)
mainCorner.Parent = mainFrame

local mainStroke = Instance.new("UIStroke")
mainStroke.Thickness = 3
mainStroke.Color = Color3.fromRGB(0, 0, 0)
mainStroke.Parent = mainFrame

-- ë“œë˜ê·¸ ê°€ëŠ¥í•˜ê²Œ ì„¤ì •
local dragDetector = Instance.new("UIDragDetector")
dragDetector.Parent = mainFrame

-- 2-1. ì¸ë²¤í† ë¦¬ ì„¹ì…˜ (ì™¼ìª½)
local invSection = Instance.new("Frame")
invSection.Name = "InventorySection"
invSection.Size = UDim2.new(0.55, -20, 0.85, -20) -- ì™¼ìª½ 55% ì°¨ì§€
invSection.Position = UDim2.new(0, 20, 0, 20)
invSection.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
invSection.Parent = mainFrame

local invCorner = Instance.new("UICorner")
invCorner.CornerRadius = UDim.new(0, 10)
invCorner.Parent = invSection

local invGrid = Instance.new("ScrollingFrame")
invGrid.Size = UDim2.new(1, -20, 1, -20)
invGrid.Position = UDim2.new(0, 10, 0, 10)
invGrid.BackgroundTransparency = 1
invGrid.ScrollBarThickness = 6
invGrid.Parent = invSection

local gridLayout = Instance.new("UIGridLayout")
gridLayout.CellSize = UDim2.new(0, 70, 0, 70)
gridLayout.CellPadding = UDim2.new(0, 10, 0, 10)
gridLayout.Parent = invGrid

-- 2-2. ì¥ë¹„ & ìŠ¤íƒ¯ ì„¹ì…˜ (ì˜¤ë¥¸ìª½)
local equipSection = Instance.new("Frame")
equipSection.Name = "EquipSection"
equipSection.Size = UDim2.new(0.4, -20, 0.7, 0) -- ì˜¤ë¥¸ìª½ 40% ì°¨ì§€
equipSection.Position = UDim2.new(0.6, 0, 0, 20)
equipSection.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
equipSection.Parent = mainFrame

local equipCorner = Instance.new("UICorner")
equipCorner.CornerRadius = UDim.new(0, 10)
equipCorner.Parent = equipSection

-- ì¥ë¹„ ìŠ¬ë¡¯ ë°°ì¹˜ (ì‹­ìê°€ ëª¨ì–‘ + ìŠ¤í˜ì…œ/ì‹ ë°œ)
local slots = {
    {Name="Head", Pos=UDim2.new(0.5, -35, 0.1, 0), Icon="ğŸª–"},
    {Name="Weapon", Pos=UDim2.new(0.2, -35, 0.4, 0), Icon="âš”ï¸"},
    {Name="Body", Pos=UDim2.new(0.5, -35, 0.4, 0), Icon="ğŸ‘•"},
    {Name="Shield", Pos=UDim2.new(0.8, -35, 0.4, 0), Icon="ğŸ›¡ï¸"},
    {Name="Shoes", Pos=UDim2.new(0.35, -35, 0.7, 0), Icon="ğŸ‘¢"},
    {Name="Special", Pos=UDim2.new(0.65, -35, 0.7, 0), Icon="âœ¨"},
}

local equipButtons = {} -- ë‚˜ì¤‘ì— ì œì–´í•˜ê¸° ìœ„í•´ ì €ì¥

for _, s in ipairs(slots) do
    local slotBtn = Instance.new("TextButton")
    slotBtn.Name = s.Name
    slotBtn.Size = UDim2.new(0, 70, 0, 70)
    slotBtn.Position = s.Pos
    slotBtn.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
    slotBtn.Text = s.Icon .. "\n" .. s.Name
    slotBtn.TextColor3 = Color3.fromRGB(200, 200, 200)
    slotBtn.Font = Enum.Font.GothamBold
    slotBtn.TextSize = 12
    slotBtn.Parent = equipSection
    
    local sc = Instance.new("UICorner")
    sc.CornerRadius = UDim.new(0, 8)
    sc.Parent = slotBtn
    
    equipButtons[s.Name] = slotBtn
end

-- 2-3. ë ˆë²¨ & ê³¨ë“œ (ì˜¤ë¥¸ìª½ í•˜ë‹¨)
local statFrame = Instance.new("Frame")
statFrame.Size = UDim2.new(0.4, -20, 0.15, 0)
statFrame.Position = UDim2.new(0.6, 0, 0.72, 10)
statFrame.BackgroundTransparency = 1
statFrame.Parent = mainFrame

local lvlLabel = Instance.new("TextLabel")
lvlLabel.Size = UDim2.new(0.5, 0, 1, 0)
lvlLabel.BackgroundTransparency = 1
lvlLabel.Text = "Lv. " .. myStats.Level
lvlLabel.TextColor3 = Color3.fromRGB(100, 200, 255) -- í•˜ëŠ˜ìƒ‰
lvlLabel.Font = Enum.Font.GothamBold
lvlLabel.TextSize = 20
lvlLabel.TextXAlignment = Enum.TextXAlignment.Left
lvlLabel.Parent = statFrame

local goldLabel = Instance.new("TextLabel")
goldLabel.Size = UDim2.new(0.5, 0, 1, 0)
goldLabel.Position = UDim2.new(0.5, 0, 0, 0)
goldLabel.BackgroundTransparency = 1
goldLabel.Text = "G: " .. myStats.Gold
goldLabel.TextColor3 = Color3.fromRGB(255, 220, 0) -- ë…¸ë€ìƒ‰
goldLabel.Font = Enum.Font.GothamBold
goldLabel.TextSize = 20
goldLabel.TextXAlignment = Enum.TextXAlignment.Right
goldLabel.Parent = statFrame

-- 2-4. íƒ­ ë²„íŠ¼ ì„¹ì…˜ (ì˜¤ë¥¸ìª½ í•˜ë‹¨)
local tabFrame = Instance.new("Frame")
tabFrame.Size = UDim2.new(0.4, -20, 0.1, 0)
tabFrame.Position = UDim2.new(0.6, 0, 0.9, -10)
tabFrame.BackgroundTransparency = 1
tabFrame.Parent = mainFrame

local tabs = {"ì¸ë²¤", "ìŠ¤íƒ¯", "ì¥ì‹"}
for i, name in ipairs(tabs) do
    local tabBtn = Instance.new("TextButton")
    tabBtn.Size = UDim2.new(0.3, 0, 1, 0)
    tabBtn.Position = UDim2.new(0.35 * (i-1), 0, 0, 0)
    tabBtn.BackgroundColor3 = i==1 and Color3.fromRGB(100, 100, 100) or Color3.fromRGB(60, 60, 60)
    tabBtn.Text = name
    tabBtn.TextColor3 = Color3.new(1,1,1)
    tabBtn.Font = Enum.Font.Gotham
    tabBtn.Parent = tabFrame
    
    local tc = Instance.new("UICorner"); tc.Parent = tabBtn
end

-- ==============================================================================
-- [ê¸°ëŠ¥ êµ¬í˜„]
-- ==============================================================================

-- ì¥ë¹„ì°½ ê°±ì‹  í•¨ìˆ˜ (ë²„ê·¸ ìˆ˜ì •ë¨)
function refreshEquipment()
    -- ë²„íŠ¼ ì „ì²´ë¥¼ ìˆœíšŒí•˜ë©´ì„œ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•´ì•¼ í•¨ (ë°ì´í„°ê°€ nilì¸ ê²½ìš°ë„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´)
    for slotName, btn in pairs(equipButtons) do
        local item = equippedData[slotName]
        
        if item then
            -- ì¥ì°©ëœ ìƒíƒœ
            btn.Text = item.icon .. "\n" .. item.name .. "\n(" .. item.stat .. ")"
            btn.BackgroundColor3 = Color3.fromRGB(100, 150, 255) -- íŒŒë€ìƒ‰ (ì¥ì°©ë¨)
        else
            -- ë¹„ì–´ìˆëŠ” ìƒíƒœ (ì›ë˜ ì•„ì´ì½˜ ë³µêµ¬)
            local defaultIcon = ""
            for _, s in ipairs(slots) do 
                if s.Name == slotName then defaultIcon = s.Icon end 
            end
            btn.Text = defaultIcon .. "\n" .. slotName
            btn.BackgroundColor3 = Color3.fromRGB(80, 80, 80) -- íšŒìƒ‰ (ë¹„ì–´ìˆìŒ)
        end
    end
end

-- ì¸ë²¤í† ë¦¬ ê°±ì‹  í•¨ìˆ˜
local function refreshInventory()
    -- ê¸°ì¡´ ì•„ì´í…œ UI ì‚­ì œ
    for _, child in pairs(invGrid:GetChildren()) do
        if child:IsA("TextButton") then child:Destroy() end
    end
    
    -- ì¸ë²¤í† ë¦¬ ë°ì´í„°ë¡œ UI ìƒì„±
    for i, item in ipairs(inventoryData) do
        local itemBtn = Instance.new("TextButton")
        itemBtn.Name = item.name
        itemBtn.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
        itemBtn.Text = item.icon
        itemBtn.TextSize = 30
        itemBtn.Parent = invGrid
        
        local ic = Instance.new("UICorner"); ic.Parent = itemBtn
        
        -- ì•„ì´í…œ ì´ë¦„ & ìŠ¤íƒ¯ ë¼ë²¨
        local nameLbl = Instance.new("TextLabel")
        nameLbl.Size = UDim2.new(1,0,0.3,0)
        nameLbl.Position = UDim2.new(0,0,0.7,0)
        nameLbl.BackgroundTransparency = 1
        nameLbl.Text = item.name
        nameLbl.TextColor3 = Color3.new(1,1,1)
        nameLbl.TextScaled = true
        nameLbl.Parent = itemBtn
        
        -- [ì¥ì°© ë¡œì§] í´ë¦­ ì‹œ ì¥ì°©
        itemBtn.MouseButton1Click:Connect(function()
            local slotType = item.type
            
            -- [ìˆ˜ì •ë¨] ì´ë¯¸ ì¥ì°©ëœ í…œì´ ìˆìœ¼ë©´ êµì²´ ë¶ˆê°€ (ë¨¼ì € ë¹¼ì•¼ í•¨)
            if equippedData[slotType] == nil then
                -- ì¥ì°©!
                equippedData[slotType] = item
                table.remove(inventoryData, i) -- ì¸ë²¤ì—ì„œ ì œê±°
                
                print("Equipped: " .. item.name)
                
                -- UI ê°±ì‹ 
                refreshInventory()
                refreshEquipment()
            else
                -- ì´ë¯¸ ì¥ì°© ì¤‘ì´ë©´ ê²½ê³ 
                print("âš ï¸ ì´ë¯¸ ì¥ì°©ëœ ì•„ì´í…œì´ ìˆìŠµë‹ˆë‹¤! ë¨¼ì € ì¥ë¹„ë¥¼ í•´ì œí•˜ì„¸ìš”.")
                -- ì‹œê°ì  í”¼ë“œë°± (ë²„íŠ¼ ë¹¨ê°„ìƒ‰ ê¹œë¹¡ì„ ë“±) ì¶”ê°€ ê°€ëŠ¥
            end
        end)
    end
end

-- ì¥ë¹„ í•´ì œ ë¡œì§ ì—°ê²°
for slotName, btn in pairs(equipButtons) do
    btn.MouseButton1Click:Connect(function()
        local item = equippedData[slotName]
        if item then
            -- í•´ì œ!
            equippedData[slotName] = nil
            table.insert(inventoryData, item) -- ì¸ë²¤ìœ¼ë¡œ ë³µê·€
            
            print("Unequipped: " .. item.name)
            refreshInventory()
            refreshEquipment()
        end
    end)
end

-- ë©”ë‰´ ì—´ê¸°/ë‹«ê¸°
menuButton.MouseButton1Click:Connect(function()
    mainFrame.Visible = not mainFrame.Visible
end)

-- ì´ˆê¸°í™”
refreshInventory()
refreshEquipment()

print("âœ… ë©”ë‰´ ì‹œìŠ¤í…œ ë¡œë“œ ì™„ë£Œ")
